<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trái tim - Trần Anh Thư</title>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      background: #000;
      overflow: hidden;
    }
    #heartCanvas {
      position: absolute;
      top: 0; left: 0;
    }
    #explosionText {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      font-size: 4rem;
      color: #ff66cc;
      font-family: 'Segoe UI', Arial, sans-serif;
      text-shadow: 0 0 16px #ff99cc, 0 0 32px #fff;
      opacity: 1;
      pointer-events: none;
      transition: opacity 0.5s, transform 0.5s;
      z-index: 10;
      user-select: none;
    }
  </style>
</head>
<body>
<canvas id="heartCanvas"></canvas>
<div id="explosionText">Trần Anh Thư</div>
<script>
const canvas = document.getElementById("heartCanvas");
const ctx = canvas.getContext("2d");
let w = window.innerWidth, h = window.innerHeight;
canvas.width = w;
canvas.height = h;

let hearts = [];

function heartShape(t) {
  const x = 16 * Math.pow(Math.sin(t), 3);
  const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
  return { x, y };
}

function createHearts(centerX, centerY) {
  hearts = [];
  for (let i = 0; i < 30; i++) {
    const angle = Math.random() * 2 * Math.PI;
    const speed = 3 + Math.random() * 4;
    const color = `hsl(${Math.random() * 360}, 100%, 70%)`;
    hearts.push({
      x: centerX,
      y: centerY,
      vx: Math.cos(angle) * speed,
      vy: Math.sin(angle) * speed,
      trail: [],
      color,
      life: 180
    });
  }
}

function drawHeart(x, y, scale, color) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(scale, scale);
  ctx.beginPath();
  for (let t = 0; t <= Math.PI * 2; t += 0.1) {
    const p = heartShape(t);
    if (t === 0) ctx.moveTo(p.x, -p.y);
    else ctx.lineTo(p.x, -p.y);
  }
  ctx.closePath();
  ctx.fillStyle = color;
  ctx.shadowBlur = 20;
  ctx.shadowColor = color;
  ctx.fill();
  ctx.restore();
}

function animate() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
  ctx.fillRect(0, 0, w, h);

  for (let h of hearts) {
    h.trail.push({ x: h.x, y: h.y });
    if (h.trail.length > 10) h.trail.shift();

    h.x += h.vx;
    h.y += h.vy;
    h.life--;

    for (let i = 0; i < h.trail.length; i++) {
      const t = h.trail[i];
      drawHeart(t.x, t.y, 0.08 * (i + 1) / h.trail.length, h.color);
    }
    drawHeart(h.x, h.y, 0.3, h.color);
  }
  hearts = hearts.filter(h => h.life > 0);
  requestAnimationFrame(animate);
}

setTimeout(() => {
  const textDiv = document.getElementById("explosionText");
  const rect = textDiv.getBoundingClientRect();
  const centerX = rect.left + rect.width / 2;
  const centerY = rect.top + rect.height / 2;
  textDiv.style.opacity = 0;
  createHearts(centerX, centerY);
}, 1000);

window.addEventListener("resize", () => {
  w = window.innerWidth;
  h = window.innerHeight;
  canvas.width = w;
  canvas.height = h;
});

animate();
</script>
</body>
</html>
